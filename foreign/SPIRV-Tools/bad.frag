#version 450

struct _1117
{
    float _m0;
    float _m1;
    uint _m2;
    uint _m3;
    uint _m4;
    uint _m5;
    uint _m6;
    uint _m7;
};

layout(binding = 0, std140) uniform _1341_4930
{
    vec4 _m0;
    mat4 _m1;
    mat4 _m2;
    _1117 _m3;
    float _m4;
    float _m5;
    float _m6;
    float _m7;
} _4930;

layout(set = 1, binding = 0) uniform sampler2D _3899;
layout(set = 1, binding = 1) uniform sampler2D _4961;
layout(set = 1, binding = 2) uniform sampler2D _5463;

layout(location = 0) out vec4 _3569;
layout(location = 2) in vec4 _3809;
layout(location = 3) in vec4 _3810;
layout(location = 4) in vec4 _3811;
layout(location = 1) in vec2 _4402;
layout(location = 0) in vec2 _4945;

vec2 _12938;
vec4 _16660;
vec3 _24831;

void main()
{
    vec4 _24582 = texture(_3899, _4945);
    vec2 _8417 = _24582.xy;
    vec4 _8059;
    vec2 _9910;
    if (_24582.y > 0.0)
    {
        vec4 _9402;
        if (_24582.x > 0.0)
        {
            vec2 _11194;
            vec4 _14247;
            _11194 = _12938;
            _14247 = vec4(_4945, -1.0, 1.0);
            for (;;)
            {
                bool _11700 = _14247.z < 15.0;
                bool _10367;
                if (_11700)
                {
                    _10367 = _14247.w > 0.89999997615814208984375;
                }
                else
                {
                    _10367 = _11700;
                }
                if (_10367)
                {
                    vec3 _16025 = fma(vec3(_4930._m0.xy, 1.0), vec3(-1.0, -1.0, 1.0), _14247.xyz);
                    vec4 _20460 = vec4(_16025.x, _16025.y, _16025.z, _14247.w);
                    vec2 _15275 = textureLod(_3899, _20460.xy, 0.0).xy;
                    vec4 _10993 = _20460;
                    _10993.w = dot(_15275, vec2(0.5));
                    _11194 = _15275;
                    _14247 = _10993;
                    continue;
                }
                else
                {
                    break;
                }
            }
            vec4 _24094 = vec4(_14247.zw.x, _16660.y, _14247.zw.y, _16660.w);
            _24094.x = _14247.x + float(_11194.y > 0.89999997615814208984375);
            _9402 = _24094;
        }
        else
        {
            _9402 = vec4(vec2(0.0).x, _16660.y, vec2(0.0).y, _16660.w);
        }
        vec4 _18242 = vec4(_4945, -1.0, 1.0);
        vec4 _11078;
        _11078 = _18242;
        for (;;)
        {
            bool _11701 = _11078.z < 15.0;
            bool _10368;
            if (_11701)
            {
                _10368 = _11078.w > 0.89999997615814208984375;
            }
            else
            {
                _10368 = _11701;
            }
            if (_10368)
            {
                vec3 _16026 = fma(vec3(_4930._m0.xy, 1.0), vec3(1.0, -(-1.0), 1.0), _11078.xyz);
                vec4 _20461 = vec4(_16026.x, _16026.y, _16026.z, _11078.w);
                vec4 _10994 = _20461;
                _10994.w = dot(textureLod(_3899, _20461.xy, 0.0).xy, vec2(0.5));
                _11078 = _10994;
                continue;
            }
            else
            {
                break;
            }
        }
        vec2 _19748;
        if ((_9402.x + _11078.x) > 2.0)
        {
            vec4 _12161 = fma(vec4(0.25 - _9402.x, -_9402.x, _11078.x, _11078.x - (-0.25)), _4930._m0.xyxy, _4945.xyxy);
            vec2 _8084 = textureLodOffset(_3899, _12161.xy, 0.0, ivec2(-1, 0)).xy;
            vec4 _8369 = vec4(_8084.x, _8084.y, _16660.z, _16660.w);
            vec2 _8085 = textureLodOffset(_3899, _12161.zw, 0.0, ivec2(1, 0)).xy;
            vec4 _9395 = vec4(_8369.x, _8369.y, _8085.x, _8085.y);
            vec2 _12359 = _9395.xz;
            vec2 _22117 = _12359 * abs((_12359 * 5.0) - vec2(3.75));
            vec4 _24279 = round(vec4(_22117.x, _9395.y, _22117.y, _9395.w));
            vec4 _11684 = vec4(_24279.y, _24279.x, _24279.w, _24279.z);
            vec2 _12009 = fma(vec2(2.0), _11684.xz, _11684.yw);
            bvec2 _24678 = notEqual(step(vec2(0.89999997615814208984375), vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).zw), vec2(0.0));
            vec2 _20514;
            if (_24678.x)
            {
                vec2 _21521 = _12009;
                _21521.x = 0.0;
                _20514 = _21521;
            }
            else
            {
                _20514 = _12009;
            }
            vec2 _16445;
            if (_24678.y)
            {
                vec2 _21522 = _20514;
                _21522.y = 0.0;
                _16445 = _21522;
            }
            else
            {
                _16445 = _20514;
            }
            vec2 _9644 = fma(vec2(0.0062500000931322574615478515625, 0.001785714295692741870880126953125), fma(vec2(20.0), _16445, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).xy), vec2(0.00312500004656612873077392578125, 0.0008928571478463709354400634765625));
            vec2 _21918 = _9644;
            _21918.x = _9644.x + 0.5;
            vec2 _21365 = _21918;
            _21365.y = 1.0 - _9644.y;
            _19748 = textureLod(_4961, _21365, 0.0).xy;
        }
        else
        {
            _19748 = vec2(0.0);
        }
        vec4 _14676 = _18242;
        _14676.x = _4945.x + (0.25 * _4930._m0.x);
        vec4 _11079;
        _11079 = _14676;
        for (;;)
        {
            bool _11702 = _11079.z < 15.0;
            bool _10369;
            if (_11702)
            {
                _10369 = _11079.w > 0.89999997615814208984375;
            }
            else
            {
                _10369 = _11702;
            }
            if (_10369)
            {
                vec3 _16027 = fma(vec3(_4930._m0.xy, 1.0), vec3(-1.0, -(-1.0), 1.0), _11079.xyz);
                vec4 _20462 = vec4(_16027.x, _16027.y, _16027.z, _11079.w);
                vec4 _6753 = textureLod(_3899, _20462.xy, 0.0);
                float _21600 = _6753.x;
                vec2 _22877 = _6753.xy;
                _22877.x = _21600 * abs((5.0 * _21600) - 3.75);
                vec4 _21594 = _20462;
                _21594.w = dot(round(_22877), vec2(0.5));
                _11079 = _21594;
                continue;
            }
            else
            {
                break;
            }
        }
        vec4 _17360;
        if (textureLodOffset(_3899, _4945, 0.0, ivec2(1, 0)).x > 0.0)
        {
            vec2 _11195;
            vec4 _14248;
            _11195 = _12938;
            _14248 = _14676;
            for (;;)
            {
                bool _11703 = _14248.z < 15.0;
                bool _10370;
                if (_11703)
                {
                    _10370 = _14248.w > 0.89999997615814208984375;
                }
                else
                {
                    _10370 = _11703;
                }
                if (_10370)
                {
                    vec3 _16028 = fma(vec3(_4930._m0.xy, 1.0), vec3(1.0, -1.0, 1.0), _14248.xyz);
                    vec4 _20463 = vec4(_16028.x, _16028.y, _16028.z, _14248.w);
                    vec4 _6754 = textureLod(_3899, _20463.xy, 0.0);
                    float _21601 = _6754.x;
                    vec2 _22878 = _6754.xy;
                    _22878.x = _21601 * abs((5.0 * _21601) - 3.75);
                    vec2 _11653 = round(_22878);
                    vec4 _21595 = _20463;
                    _21595.w = dot(_11653, vec2(0.5));
                    _11195 = _11653;
                    _14248 = _21595;
                    continue;
                }
                else
                {
                    break;
                }
            }
            vec4 _24095 = vec4(vec4(_11079.zw.x, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).y, _11079.zw.y, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).w).x, _14248.zw.x, vec4(_11079.zw.x, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).y, _11079.zw.y, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).w).z, _14248.zw.y);
            _24095.y = _14248.x + float(_11195.y > 0.89999997615814208984375);
            _17360 = _24095;
        }
        else
        {
            _17360 = vec4(vec4(_11079.zw.x, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).y, _11079.zw.y, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).w).x, vec2(0.0).x, vec4(_11079.zw.x, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).y, _11079.zw.y, vec4(_9402.x, _11078.zw.x, _9402.z, _11078.zw.y).w).z, vec2(0.0).y);
        }
        vec2 _17706;
        if ((_17360.x + _17360.y) > 2.0)
        {
            vec4 _12162 = fma(vec4(-_17360.x, _17360.xy, -_17360.y), _4930._m0.xyxy, _4945.xyxy);
            vec2 _18770 = _12162.xy;
            vec4 _13287 = _16660;
            _13287.x = textureLodOffset(_3899, _18770, 0.0, ivec2(-1, 0)).y;
            vec4 _14977 = _13287;
            _14977.y = textureLodOffset(_3899, _18770, 0.0, ivec2(0, 1)).x;
            vec2 _8086 = textureLodOffset(_3899, _12162.zw, 0.0, ivec2(1, 0)).yx;
            vec4 _8198 = vec4(_14977.x, _14977.y, _8086.x, _8086.y);
            vec2 _12010 = fma(vec2(2.0), _8198.xz, _8198.yw);
            bvec2 _24679 = notEqual(step(vec2(0.89999997615814208984375), _17360.zw), vec2(0.0));
            vec2 _20515;
            if (_24679.x)
            {
                vec2 _21524 = _12010;
                _21524.x = 0.0;
                _20515 = _21524;
            }
            else
            {
                _20515 = _12010;
            }
            vec2 _16446;
            if (_24679.y)
            {
                vec2 _21525 = _20515;
                _21525.y = 0.0;
                _16446 = _21525;
            }
            else
            {
                _16446 = _20515;
            }
            vec2 _9645 = fma(vec2(0.0062500000931322574615478515625, 0.001785714295692741870880126953125), fma(vec2(20.0), _16446, _17360.xy), vec2(0.00312500004656612873077392578125, 0.0008928571478463709354400634765625));
            vec2 _21919 = _9645;
            _21919.x = _9645.x + 0.5;
            vec2 _21366 = _21919;
            _21366.y = 1.0 - _9645.y;
            _17706 = _19748 + textureLod(_4961, _21366, 0.0).xy.yx;
        }
        else
        {
            _17706 = _19748;
        }
        vec4 _11251;
        vec2 _13709;
        if (_17706.x == (-_17706.y))
        {
            vec2 _11196;
            vec2 _14249;
            _11196 = _3809.xy;
            _14249 = vec2(0.0, 1.0);
            float _23945;
            for (;;)
            {
                _23945 = _11196.x;
                bool _14386 = _23945 > _3811.x;
                bool _10924;
                if (_14386)
                {
                    _10924 = _14249.y > 0.828100025653839111328125;
                }
                else
                {
                    _10924 = _14386;
                }
                bool _10371;
                if (_10924)
                {
                    _10371 = _14249.x == 0.0;
                }
                else
                {
                    _10371 = _10924;
                }
                if (_10371)
                {
                    _11196 = fma(vec2(-2.0, -0.0), _4930._m0.xy, _11196);
                    _14249 = textureLod(_3899, _11196, 0.0).xy;
                    continue;
                }
                else
                {
                    break;
                }
            }
            vec2 _9252 = fma(vec2(0.5, -2.0), _14249, vec2(0.0078125, 2.03125));
            vec2 _14938 = _9252;
            _14938.y = 1.0 - _9252.y;
            float _10172 = fma(_4930._m0.x, fma(-2.007874011993408203125, textureLod(_5463, _14938, 0.0).x, 3.25), _23945);
            vec3 _21352 = _24831;
            _21352.x = _10172;
            vec3 _15905 = _21352;
            _15905.y = _3810.y;
            vec2 _12311 = _12938;
            _12311.x = _10172;
            vec2 _11197;
            vec2 _14250;
            _11197 = _3809.zw;
            _14250 = vec2(0.0, 1.0);
            float _24295;
            for (;;)
            {
                _24295 = _11197.x;
                bool _11704 = _24295 < _3811.y;
                bool _10925;
                if (_11704)
                {
                    _10925 = _14250.y > 0.828100025653839111328125;
                }
                else
                {
                    _10925 = _11704;
                }
                bool _10372;
                if (_10925)
                {
                    _10372 = _14250.x == 0.0;
                }
                else
                {
                    _10372 = _10925;
                }
                if (_10372)
                {
                    _11197 = fma(vec2(2.0, 0.0), _4930._m0.xy, _11197);
                    _14250 = textureLod(_3899, _11197, 0.0).xy;
                    continue;
                }
                else
                {
                    break;
                }
            }
            vec2 _25097 = fma(vec2(0.5, -2.0), _14250, vec2(0.5234375, 2.03125));
            vec2 _10134 = _25097;
            _10134.y = 1.0 - _25097.y;
            float _11693 = fma(-_4930._m0.x, fma(-2.007874011993408203125, textureLod(_5463, _10134, 0.0).x, 3.25), _24295);
            vec3 _20689 = _15905;
            _20689.z = _11693;
            vec2 _17387 = _12311;
            _17387.y = _11693;
            vec2 _12943 = abs(round(fma(_4930._m0.zz, _17387, -_4402.xx)));
            vec2 _18072 = fma(vec2(0.0062500000931322574615478515625, 0.001785714295692741870880126953125), fma(vec2(16.0), round(vec2(textureLod(_3899, _15905.xy, 0.0).x, textureLodOffset(_3899, _20689.zy, 0.0, ivec2(1, 0)).x) * 4.0), sqrt(_12943)), vec2(0.00312500004656612873077392578125, 0.0008928571478463709354400634765625));
            vec2 _13728 = _18072;
            _13728.y = 1.0 - fma(0.14285714924335479736328125, 0.0, _18072.y);
            vec2 _6538 = textureLod(_4961, _13728, 0.0).xy;
            vec4 _7679 = vec4(_6538.x, _6538.y, vec4(_17706.x, _17706.y, vec4(0.0).z, vec4(0.0).w).z, vec4(_17706.x, _17706.y, vec4(0.0).z, vec4(0.0).w).w);
            vec3 _17731 = _20689;
            _17731.y = _4945.y;
            vec2 _19782 = step(_12943, _12943.yx);
            vec2 _21387 = (_19782 * 0.75) / vec2(_19782.x + _19782.y);
            float _8280 = _21387.x;
            float _23213 = _21387.y;
            vec2 _13330 = vec2(1.0);
            _13330.x = (1.0 - (_8280 * textureLodOffset(_3899, _17731.xyzy.xy, 0.0, ivec2(0, -1)).x)) - (_23213 * textureLodOffset(_3899, _17731.xyzy.zw, 0.0, ivec2(1, -1)).x);
            vec2 _14695 = _13330;
            _14695.y = (1.0 - (_8280 * textureLodOffset(_3899, _17731.xyzy.xy, 0.0, ivec2(0, 2)).x)) - (_23213 * textureLodOffset(_3899, _17731.xyzy.zw, 0.0, ivec2(1, 2)).x);
            vec2 _22452 = _7679.xy * clamp(_14695, vec2(0.0), vec2(1.0));
            _11251 = vec4(_22452.x, _22452.y, _7679.z, _7679.w);
            _13709 = _8417;
        }
        else
        {
            vec2 _23943 = _8417;
            _23943.x = 0.0;
            _11251 = vec4(_17706.x, _17706.y, vec4(0.0).z, vec4(0.0).w);
            _13709 = _23943;
        }
        _8059 = _11251;
        _9910 = _13709;
    }
    else
    {
        _8059 = vec4(0.0);
        _9910 = _8417;
    }
    vec4 _23915;
    if (_9910.x > 0.0)
    {
        vec2 _11198;
        vec2 _14251;
        _11198 = _3810.xy;
        _14251 = vec2(1.0, 0.0);
        float _24296;
        for (;;)
        {
            _24296 = _11198.y;
            bool _11705 = _24296 < _3811.z;
            bool _10926;
            if (_11705)
            {
                _10926 = _14251.x > 0.828100025653839111328125;
            }
            else
            {
                _10926 = _11705;
            }
            bool _10373;
            if (_10926)
            {
                _10373 = _14251.y == 0.0;
            }
            else
            {
                _10373 = _10926;
            }
            if (_10373)
            {
                _11198 = fma(vec2(-0.0, 2.0), _4930._m0.xy, _11198);
                _14251 = textureLod(_3899, _11198, 0.0).xy;
                continue;
            }
            else
            {
                break;
            }
        }
        vec2 _9253 = fma(vec2(0.5, -2.0), _14251.yx, vec2(0.0078125, 2.03125));
        vec2 _14939 = _9253;
        _14939.y = 1.0 - _9253.y;
        float _9668 = fma(_4930._m0.y, -fma(-2.007874011993408203125, textureLod(_5463, _14939, 0.0).x, 3.25), _24296);
        vec3 _20919 = _24831;
        _20919.y = _9668;
        vec3 _15906 = _20919;
        _15906.x = _3809.x;
        vec2 _12312 = _12938;
        _12312.x = _9668;
        vec2 _11199;
        vec2 _14252;
        _11199 = _3810.zw;
        _14252 = vec2(1.0, 0.0);
        float _23946;
        for (;;)
        {
            _23946 = _11199.y;
            bool _14387 = _23946 > _3811.w;
            bool _10927;
            if (_14387)
            {
                _10927 = _14252.x > 0.828100025653839111328125;
            }
            else
            {
                _10927 = _14387;
            }
            bool _10374;
            if (_10927)
            {
                _10374 = _14252.y == 0.0;
            }
            else
            {
                _10374 = _10927;
            }
            if (_10374)
            {
                _11199 = fma(vec2(0.0, -2.0), _4930._m0.xy, _11199);
                _14252 = textureLod(_3899, _11199, 0.0).xy;
                continue;
            }
            else
            {
                break;
            }
        }
        vec2 _25098 = fma(vec2(0.5, -2.0), _14252.yx, vec2(0.5234375, 2.03125));
        vec2 _10135 = _25098;
        _10135.y = 1.0 - _25098.y;
        float _17717 = fma(-_4930._m0.y, -fma(-2.007874011993408203125, textureLod(_5463, _10135, 0.0).x, 3.25), _23946);
        vec3 _20423 = _15906;
        _20423.z = _17717;
        vec2 _19467 = _12312;
        _19467.y = _17717;
        vec2 _12944 = abs(round(fma(_4930._m0.ww, _19467, -_4402.yy)));
        vec2 _18073 = fma(vec2(0.0062500000931322574615478515625, 0.001785714295692741870880126953125), fma(vec2(16.0), round(vec2(textureLod(_3899, _15906.xy, 0.0).y, textureLodOffset(_3899, _20423.xz, 0.0, ivec2(0, -1)).y) * 4.0), sqrt(_12944)), vec2(0.00312500004656612873077392578125, 0.0008928571478463709354400634765625));
        vec2 _13729 = _18073;
        _13729.y = 1.0 - fma(0.14285714924335479736328125, 0.0, _18073.y);
        vec2 _6519 = textureLod(_4961, _13729, 0.0).xy;
        vec4 _7909 = vec4(_8059.x, _8059.y, _6519.x, _6519.y);
        vec3 _17233 = _20423;
        _17233.x = _4945.x;
        vec2 _19783 = step(_12944, _12944.yx);
        vec2 _21388 = (_19783 * 0.75) / vec2(_19783.x + _19783.y);
        float _8281 = _21388.x;
        float _23214 = _21388.y;
        vec2 _13331 = vec2(1.0);
        _13331.x = (1.0 - (_8281 * textureLodOffset(_3899, _17233.xyxz.xy, 0.0, ivec2(1, 0)).y)) - (_23214 * textureLodOffset(_3899, _17233.xyxz.zw, 0.0, ivec2(1, -1)).y);
        vec2 _14696 = _13331;
        _14696.y = (1.0 - (_8281 * textureLodOffset(_3899, _17233.xyxz.xy, 0.0, ivec2(-2, 0)).y)) - (_23214 * textureLodOffset(_3899, _17233.xyxz.zw, 0.0, ivec2(-2, -1)).y);
        vec2 _22460 = _7909.zw * clamp(_14696, vec2(0.0), vec2(1.0));
        _23915 = vec4(_7909.x, _7909.y, _22460.x, _22460.y);
    }
    else
    {
        _23915 = _8059;
    }
    _3569 = _23915;
}

